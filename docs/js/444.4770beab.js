"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[444],{9444:function(e,a,l){l.r(a),l.d(a,{default:function(){return R}});var t=l(3396),s=l(7139),n=l(4870),u=l(6431),o=l(6329),i=l(5743),d=l(65),c=l(2483);const p=e=>((0,t.dD)("data-v-b5071010"),e=e(),(0,t.Cn)(),e),v={class:"body"},r={class:"orderpage"},m={class:"top"},h={class:"address"},_={class:"edit"},b=p((()=>(0,t._)("h3",null,"收货地址",-1))),f={class:"actionsheet"},g={class:"content"},w={class:"order"},U={class:"goods"},W={class:"count"},k={class:"money"},S={class:"goodsMoney"},y={class:"center"},H={class:"all"},C={class:"submit"};var D={__name:"orderpageT",setup(e){let a=(0,c.tv)(),l=(0,d.oR)(),p=((0,n.iH)(!0),(0,n.iH)([])),D=(0,n.iH)([]),x=(0,n.iH)(null),A=(0,n.iH)(!1),R=(0,n.iH)(""),T=(0,n.iH)(l.state.shoporder.cradList);async function V(){p.value=[];let e=await(0,i.U2)("/address");e.result.forEach((e=>{let a={id:e.id,name:e.name,tel:e.phone,address:e.area_name+"  "+e.desc,isDefault:"1"===e.default_set};p.value.push(a)})),D.value=p.value.find((e=>e.isDefault)),R.value=D.value.id,x.value="默认"}V();const z=e=>{D.value=e,A.value=!1,D.value.isDefault?x.value="默认":x.value=""},E=()=>{A.value=!0},L=()=>{(0,o.Am)(),l.commit("changeRouterType","push"),a.push("/newedit")},$=e=>{(0,o.Am)(),l.commit("changeRouterType","push"),a.push(`/edit?key=${e.id}`)},q={available:1,condition:"无门槛\n最多优惠12元",reason:"",value:150,name:"优惠券名称",startAt:1489104e3,endAt:1514592e3,valueDesc:"1.5",unitDesc:"元"},I=(0,n.iH)([q]),j=(0,n.iH)(!1),M=(0,n.iH)(-1),O=e=>{j.value=!1,M.value=e},Z=e=>{I.value.push(q)},B=()=>{u.V.confirm({title:"小xu提示",message:"您是否确认取消订单?"}).then((()=>{l.commit("changeRouterType","back"),a.push(`/shoppage?key=${T.value.id}`)})).catch((()=>{}))},F=async()=>{(0,o.Am)();let e=l.state.shoporder.cradList,t=D.value,s=[e.id],n=[{id:e.id,num:1}],u={addr_id:t.id,goods_info:n,project_id:240,shoppingCartIds:s};(0,i.v_)("/order",u).then((e=>{let t=e.data.result.id;l.commit("changeRouterType","push"),a.push(`/paymentOrder?key=${t}`)}))};return(e,a)=>{const l=(0,t.up)("van-nav-bar"),u=(0,t.up)("van-badge"),o=(0,t.up)("van-icon"),i=(0,t.up)("van-address-list"),d=(0,t.up)("van-action-sheet"),c=(0,t.up)("van-card"),V=(0,t.up)("van-swipe-cell"),q=(0,t.up)("van-cell"),G=(0,t.up)("van-coupon-cell"),J=(0,t.up)("van-coupon-list"),K=(0,t.up)("van-popup"),N=(0,t.up)("van-submit-bar");return(0,t.wg)(),(0,t.iD)("div",v,[(0,t._)("div",r,[(0,t._)("div",m,[(0,t.Wm)(l,{title:"确认订单","left-text":"","left-arrow":"",onClickLeft:B})]),(0,t._)("div",h,[(0,t._)("div",_,[b,(0,t._)("p",null,[(0,t.Uk)((0,s.zw)((0,n.SU)(D).address)+" ",1),(0,t.Wm)(u,{class:"badge",content:(0,n.SU)(x)},null,8,["content"])]),(0,t._)("p",null,[(0,t.Uk)((0,s.zw)((0,n.SU)(D).name)+" ",1),(0,t._)("span",null,(0,s.zw)((0,n.SU)(D).tel),1)])]),(0,t.Wm)(o,{class:"edit-icon",name:"edit",onClick:E})]),(0,t._)("div",f,[(0,t.Wm)(d,{show:(0,n.SU)(A),"onUpdate:show":a[1]||(a[1]=e=>(0,n.dq)(A)?A.value=e:A=e),title:"选择收货地址"},{default:(0,t.w5)((()=>[(0,t._)("div",g,[(0,t.Wm)(i,{modelValue:(0,n.SU)(R),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.dq)(R)?R.value=e:R=e),list:(0,n.SU)(p),"default-tag-text":"默认",onSelect:z,switchable:"",onAdd:L,onEdit:$},null,8,["modelValue","list"])])])),_:1},8,["show"])]),(0,t._)("div",w,[(0,t._)("div",U,[(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{num:1,price:(0,n.SU)(T).price,desc:(0,n.SU)(T).desc,title:(0,n.SU)(T).name,class:"goods-card",thumb:(0,n.SU)(T).s_goods_photos[0].path},null,8,["price","desc","title","thumb"])])),_:1})]),(0,t._)("div",W,[(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t.Wm)(q,{border:!1,title:"配送服务",value:"快递 包邮","is-link":""}),(0,t.Wm)(q,{border:!1,title:"运费险",value:"未选择","is-link":""}),(0,t.Wm)(q,{border:!1,title:"订单备注",value:"无备注","is-link":""})])),_:1})])]),(0,t._)("div",k,[(0,t._)("div",S,[(0,t.Wm)(q,{value:"价格明细"}),(0,t.Wm)(q,{title:"商品总数",value:"1"})]),(0,t._)("div",y,[(0,t.Wm)(G,{coupons:I.value,"chosen-coupon":M.value,onClick:a[2]||(a[2]=e=>j.value=!0)},null,8,["coupons","chosen-coupon"]),(0,t.Wm)(K,{show:j.value,round:"",position:"bottom",style:{height:"90%","padding-top":"4px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{coupons:I.value,"chosen-coupon":M.value,"disabled-coupons":e.disabledCoupons,onChange:O,onExchange:Z},null,8,["coupons","chosen-coupon","disabled-coupons"])])),_:1},8,["show"])]),(0,t._)("div",H,[(0,t.Wm)(q,{title:"合计",value:"￥"+(0,n.SU)(T).price},null,8,["value"])])]),(0,t._)("div",C,[(0,t.Wm)(N,{price:100*(0,n.SU)(T).price,"button-text":"提交订单",onSubmit:F},null,8,["price"])])])])}}},x=l(89);const A=(0,x.Z)(D,[["__scopeId","data-v-b5071010"]]);var R=A}}]);
//# sourceMappingURL=444.4770beab.js.map