"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[125],{4125:function(e,a,l){l.r(a),l.d(a,{default:function(){return F}});var s=l(3396),t=l(4870),i=l(7139),c=l(9242),o=l(5743),u=l(6329),n=l(2483),d=l(65);const r=e=>((0,s.dD)("data-v-1a74cf71"),e=e(),(0,s.Cn)(),e),p={class:"body"},h={class:"page"},v={class:"top"},m={class:"input"},g={action:"/"},_=r((()=>(0,s._)("span",null,"搜索",-1))),w=[_],k={class:"oldSearch search"},y={class:"title"},f=r((()=>(0,s._)("h2",null,"历史搜索",-1))),U={class:"listSearch search"},S=r((()=>(0,s._)("h2",null,"热门搜索",-1))),C={class:"empty"},H=r((()=>(0,s._)("h3",null,"推荐商品",-1))),b={class:"goodslist"},j=(0,s.Uk)("新品"),W=(0,s.Uk)("特价");var A={__name:"Searchpage",setup(e){const a=(0,d.oR)(),l=(0,n.tv)();let r=(0,t.iH)(""),_=(0,t.iH)((0,u.Gg)("oldSearch")),A=(0,t.iH)(!0),D=(0,t.iH)(!1),z=(0,t.iH)([]),F=(0,t.iH)([]),G=(0,t.iH)(!1);(0,o.U2)("/classify/classifyGoods",{project_id:240}).then((e=>{z.value=e.result}));const K=e=>{r.value=e,(0,o.U2)("/goodsSearch",{project_id:240,name:e}).then((e=>{console.log(e),e.result.rows.length?G.value=!1:(G.value=!0,(0,o.U2)("/goods",{project_id:240,page:3,limit:10}).then((e=>{F.value=e.result.rows}))),F.value=e.result.rows}))},R=e=>{(0,u.Am)(),A.value=!1,D.value=!0,e&&a.dispatch("search/changoldlist",e),K(e)},V=()=>{(0,u.Am)(),A.value=!1,D.value=!0,r.value&&a.dispatch("search/changoldlist",r.value),K(r.value)},Y=e=>{(0,u.Am)(),A.value=!1,D.value=!0,K(e)},T=()=>{(0,u.Am)(),a.dispatch("search/delList"),_.value=(0,u.Gg)("oldSearch")},q=(e,l)=>{r.value=l,(0,u.Am)(),A.value=!1,D.value=!0,l&&a.dispatch("search/changoldlist",l),(0,o.U2)("/goods",{project_id:240,page:1,limit:10,classify_id:e}).then((e=>{e.result.rows.length||(G.value=!G.value,(0,o.U2)("/goods",{project_id:240,page:3,limit:10}).then((e=>{F.value=e.result.rows}))),F.value=e.result.rows}))},I=()=>{(0,u.Am)(),a.commit("changeRouterType","back"),history.back()},L=e=>{a.commit("changeRouterType","push"),l.push(`shoppage?key=${e}`)};return(e,a)=>{const l=(0,s.up)("van-icon"),o=(0,s.up)("van-search"),u=(0,s.up)("van-button"),n=(0,s.up)("van-empty"),d=(0,s.up)("van-tag"),K=(0,s.up)("van-card");return(0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",h,[(0,s._)("div",v,[(0,s._)("div",{class:"left",onClick:I},[(0,s.Wm)(l,{name:"arrow-left"})]),(0,s._)("div",m,[(0,s._)("form",g,[(0,s.Wm)(o,{modelValue:(0,t.SU)(r),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,t.dq)(r)?r.value=e:r=e),shape:"round",placeholder:"请输入搜索关键词",onSearch:R,clearable:!0},null,8,["modelValue"])])]),(0,s._)("div",{class:"right",onClick:V},w)]),(0,s.wy)((0,s._)("div",k,[(0,s._)("div",y,[f,(0,s.Wm)(l,{onClick:T,name:"delete-o"})]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(_),((e,a)=>((0,s.wg)(),(0,s.j4)(u,{key:a,type:"default",size:"small",onClick:a=>Y(e)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e),1)])),_:2},1032,["onClick"])))),128))],512),[[c.F8,(0,t.SU)(A)]]),(0,s.wy)((0,s._)("div",U,[S,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(z),((e,a)=>((0,s.wg)(),(0,s.j4)(u,{key:a,type:"default",size:"small",onClick:a=>q(e.id,e.name)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.name),1)])),_:2},1032,["onClick"])))),128))],512),[[c.F8,(0,t.SU)(A)]]),(0,s.wy)((0,s._)("div",C,[(0,s.Wm)(n,{image:"search",description:"暂无搜索商品"}),H],512),[[c.F8,(0,t.SU)(G)]]),(0,s.wy)((0,s._)("div",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,t.SU)(F),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s.Wm)(K,{price:e.price,desc:e.desc,title:e.name,thumb:e.s_goods_photos[0].path,onClick:a=>L(e.id)},{tags:(0,s.w5)((()=>[(0,s.Wm)(d,{plain:"",type:"danger"},{default:(0,s.w5)((()=>[j])),_:1}),(0,s.Wm)(d,{plain:"",type:"danger"},{default:(0,s.w5)((()=>[W])),_:1})])),_:2},1032,["price","desc","title","thumb","onClick"])])))),128))],512),[[c.F8,(0,t.SU)(D)]])])])}}},D=l(89);const z=(0,D.Z)(A,[["__scopeId","data-v-1a74cf71"]]);var F=z}}]);
//# sourceMappingURL=125.d12dfefa.js.map