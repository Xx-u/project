{"version":3,"file":"js/389.9f937c8d.js","mappings":"kaA2DA,MAAMA,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MACf,IAAIC,GAAWC,EAAAA,EAAAA,IAAIL,EAAMM,MAAMC,KAAKC,UAChCC,GAAQJ,EAAAA,EAAAA,IAAIL,EAAMM,MAAMC,KAAKG,WAC7BC,GAAWN,EAAAA,EAAAA,IAAIL,EAAMM,MAAMC,KAAKI,UAChCC,GAAUP,EAAAA,EAAAA,IAAIL,EAAMM,MAAMC,KAAKM,YAC/BC,GAAOT,EAAAA,EAAAA,IAAI,QAEXU,IADMV,EAAAA,EAAAA,IAAI,OACHA,EAAAA,EAAAA,IAAI,aAGf,MAAMW,EAAW,KACfF,EAAKG,OAASH,EAAKG,MACnBF,EAAKE,MAAQH,EAAKG,MAAQ,WAAa,MAAvC,EAGIC,EAAaC,KACjBC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,IAAM,UAAW,CAAEF,KAAMA,EAAKA,OAAQG,MAAKC,IACzCC,QAAQC,IAAIF,GACZX,EAAQK,MAAQM,EAAIG,KAAKC,OAAOC,IAAhC,GAFF,EAMIC,EAAYH,IAChB,IAAII,EAAO,CACTC,KAAM3B,EAASa,MACfN,SAAUA,EAASM,MACnBR,MAAOA,EAAMQ,MACbJ,WAAYD,EAAQK,QAEtBe,EAAAA,EAAAA,IAAK,SAAQhC,EAAMM,MAAMC,KAAK0B,SAAUH,GAAMR,MAAKC,IACjDC,QAAQC,IAAIF,IACZW,EAAAA,EAAAA,GAAM,QACNlC,EAAMmC,OAAO,kBAAmBZ,EAAII,OAAOI,MAC3C/B,EAAMmC,OAAO,mBAAoBZ,EAAII,OAAOlB,OAC5CT,EAAMmC,OAAO,sBAAuBZ,EAAII,OAAOhB,UAC/CX,EAAMmC,OAAO,iBAAkBZ,EAAII,OAAOd,YAC1Cb,EAAMmC,OAAO,mBAAoB,QACjCjC,EAAOkC,KAAK,MAAZ,GARF,EAYIC,EAAc,KAClBrC,EAAMmC,OAAO,mBAAoB,QACjCjC,EAAOkC,KAAK,MAAZ,E,i/CClGF,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://demo/./src/views/my/EditorUser.vue","webpack://demo/./src/views/my/EditorUser.vue?c7fd"],"sourcesContent":["<template>\r\n  <div class=\"body\">\r\n    <div class=\"page\">\r\n      <van-nav-bar title=\"编辑资料\" left-arrow @click-left=\"onClickLeft\" />\r\n      <div class=\"header\">\r\n        <van-uploader :after-read=\"afterRead\">\r\n          <img :src=\"headImg\" alt=\"\" />\r\n        </van-uploader>\r\n      </div>\r\n      <div class=\"editBody\">\r\n        <van-form @submit=\"onSubmit\">\r\n          <van-cell-group inset>\r\n            <van-field\r\n              v-model=\"username\"\r\n              name=\"用户名\"\r\n              label=\"用户名\"\r\n              placeholder=\"用户名\"\r\n              :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n            />\r\n            <van-field\r\n              v-model=\"phone\"\r\n              type=\"phone\"\r\n              name=\"手机\"\r\n              label=\"手机\"\r\n              placeholder=\"手机\"\r\n              :rules=\"[{ required: true, message: '请填写手机' }]\"\r\n            />\r\n            <van-field\r\n              v-model=\"password\"\r\n              :type=\"type\"\r\n              name=\"密码\"\r\n              label=\"密码\"\r\n              placeholder=\"密码\"\r\n              :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n            />\r\n            <div class=\"yuan\">\r\n              <van-icon v-show=\"show\" @click=\"checkeye\" name=\"closed-eye\" />\r\n              <van-icon v-show=\"!show\" @click=\"checkeye\" name=\"eye-o\" />\r\n            </div>\r\n          </van-cell-group>\r\n          <div style=\"margin: 16px\">\r\n            <van-button round block type=\"primary\" native-type=\"submit\">\r\n              保存\r\n            </van-button>\r\n          </div>\r\n        </van-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router';\r\nimport { ref } from '@vue/reactivity';\r\nimport { toast } from '../../Utils/index.js'\r\nimport { postT, put } from '../../Utils/request.js'\r\nimport { Toast } from 'vant';\r\nimport { computed } from '@vue/runtime-core';\r\nconst store = useStore()\r\nconst router = useRouter();\r\nlet username = ref(store.state.user.userName)\r\nlet phone = ref(store.state.user.userPhone)\r\nlet password = ref(store.state.user.password)\r\nlet headImg = ref(store.state.user.header_img)\r\nlet show = ref('true')\r\nlet pwd = ref(null)\r\nlet type = ref('password')\r\n\r\n// 显示密码\r\nconst checkeye = () => {\r\n  show.value = !show.value\r\n  type.value = show.value ? 'password' : 'text'\r\n}\r\n// 上传头像\r\nconst afterRead = (file) => {\r\n  toast()\r\n  postT('/update', { file: file.file }).then(res => {\r\n    console.log(res);\r\n    headImg.value = res.data.result.path\r\n  })\r\n};\r\n// 保存更新用户信息\r\nconst onSubmit = (data) => {\r\n  let body = {\r\n    name: username.value,\r\n    password: password.value,\r\n    phone: phone.value,\r\n    header_img: headImg.value\r\n  }\r\n  put(`/user/${store.state.user.userID}`, body).then(res => {\r\n    console.log(res);\r\n    Toast('保存成功')\r\n    store.commit('user/changeName', res.result.name)\r\n    store.commit('user/changePhone', res.result.phone)\r\n    store.commit('user/changePassword', res.result.password)\r\n    store.commit('user/changeimg', res.result.header_img)\r\n    store.commit(\"changeRouterType\", \"back\")\r\n    router.push('/my')\r\n  })\r\n}\r\n// 返回\r\nconst onClickLeft = () => {\r\n  store.commit(\"changeRouterType\", \"back\")\r\n  router.push('/my');\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.body {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #f6f6f6;\r\n  .page {\r\n    width: 100%;\r\n    height: 100vh;\r\n    background-color: #f6f6f6;\r\n  }\r\n}\r\n\r\n::v-deep button {\r\n  height: 0.4rem !important;\r\n}\r\n.header {\r\n  width: 0.94rem;\r\n  height: 0.94rem;\r\n  margin: 0.5rem auto;\r\n  background: url(\"../../assets/image/userimg.jpg\") no-repeat center;\r\n  img {\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 50%;\r\n  }\r\n  p {\r\n    margin-top: 0.1rem;\r\n    font-size: 0.14rem;\r\n    width: 100%;\r\n    text-align: center;\r\n  }\r\n}\r\n.editBody {\r\n  position: relative;\r\n  .inputItem {\r\n    margin: 0.2rem 0;\r\n  }\r\n  .yuan {\r\n    position: absolute;\r\n    right: 0.4rem;\r\n    bottom: 0.7rem;\r\n  }\r\n}\r\n::v-deep .van-uploader__wrapper {\r\n  .van-uploader__upload {\r\n    width: 0.94rem;\r\n    height: 0.94rem;\r\n    margin: 0;\r\n    border-radius: 50% !important;\r\n  }\r\n}\r\n::v-deep .van-uploader__input-wrapper {\r\n  width: 0.94rem;\r\n  height: 0.94rem;\r\n}\r\n</style>\r\n","import script from \"./EditorUser.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EditorUser.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./EditorUser.vue?vue&type=style&index=0&id=cc8215a2&lang=scss&scoped=true\"\n\nimport exportComponent from \"F:\\\\My-project\\\\shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-cc8215a2\"]])\n\nexport default __exports__"],"names":["store","useStore","router","useRouter","username","ref","state","user","userName","phone","userPhone","password","headImg","header_img","show","type","checkeye","value","afterRead","file","toast","postT","then","res","console","log","data","result","path","onSubmit","body","name","put","userID","Toast","commit","push","onClickLeft","__exports__"],"sourceRoot":""}