(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[973],{1078:function(t,e,n){"use strict";n.d(e,{GE:function(){return c},Y2:function(){return d},sv:function(){return a},tQ:function(){return l}});let i=/^[\u4E00-\u9FA5A-Za-z0-9_-]+$/g,o=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/g,s=/^\d{6}$/g;function r(t,e){let n;return n=!e.test(t.value),n}function a(t){return r(t,i)}function l(t){return r(t,o)}function c(t){return r(t,s)}function d(t){let e,n=[];return t.forEach(((t,e)=>{""==t.value&&n.push(e)})),e=!n.length,e}},9663:function(){(function(){"use strict";function t(t){var e=document.getElementById(t.id),n="object"==typeof t&&t;return new o(e,n)}var e,n=function(){var t,e,n,i=arguments.length,o=arguments[0]||{};for("object"!=typeof o&&"function"!=typeof o&&(o={}),1==i&&(o=this,t--),t=1;t<i;t++)for(n in e=arguments[t],e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o},i=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},o=function(t,e){this.$element=t,this.options=n({},o.DEFAULTS,e),this.$element.style.position="relative",this.$element.style.width=this.options.width+"px",this.$element.style.margin="0 auto",this.init()};o.VERSION="1.0",o.Author="imooc_front@163.com",o.DEFAULTS={width:280,height:155,PI:Math.PI,sliderL:42,sliderR:9,offset:5,loadingText:"正在加载中...",failedText:"再试一次",barText:"向右滑动填充拼图",repeatIcon:"iconfont iconfont-shuaxin",maxLoadCount:3,localImages:function(){return"images/Pic"+Math.round(4*Math.random())+".jpg"},verify:function(t,e){var n=!1;return $.ajax({url:e,data:{datas:JSON.stringify(t)},dataType:"json",type:"post",async:!1,success:function(t){n=JSON.stringify(t),console.log("返回结果："+n)}}),n},remoteUrl:""},window.sliderCaptcha=t,window.sliderCaptcha.Constructor=o,e=o.prototype,e.init=function(){this.initDOM(),this.initImg(),this.bindEvents()},e.initDOM=function(){var t,e,o=function(t,e){var n=document.createElement(t);return n.className=e,n},s=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},r=s(this.options.width-2,this.options.height),a=r.cloneNode(!0),l=o("div","sliderContainer"),c=o("i","refreshIcon "+this.options.repeatIcon),d=o("div","sliderMask"),u=o("div","sliderbg"),h=o("div","slider"),p=o("i","iconfont icon-arrow-right sliderIcon"),f=o("span","sliderText");a.className="slider-captcha-block",f.innerHTML=this.options.barText,t=this.$element,t.appendChild(r),t.appendChild(c),t.appendChild(a),h.appendChild(p),d.appendChild(h),l.appendChild(u),l.appendChild(d),l.appendChild(f),t.appendChild(l),e={canvas:r,block:a,sliderContainer:l,refreshIcon:c,slider:h,sliderMask:d,sliderIcon:p,text:f,canvasCtx:r.getContext("2d"),blockCtx:a.getContext("2d")},i(Object.assign)?Object.assign(this,e):n(this,e)},e.initImg=function(){var t,e=this,n=window.navigator.userAgent.indexOf("Trident")>-1,o=this.options.sliderL+2*this.options.sliderR+3,s=function(t,i){var o=e.options.sliderL,s=e.options.sliderR,r=e.options.PI,a=e.x,l=e.y;t.beginPath(),t.moveTo(a,l),t.arc(a+o/2,l-s+2,s,.72*r,2.26*r),t.lineTo(a+o,l),t.arc(a+o+s-2,l+o/2,s,1.21*r,2.78*r),t.lineTo(a+o,l+o),t.lineTo(a,l+o),t.arc(a+s-2,l+o/2,s+.4,2.76*r,1.24*r,!0),t.lineTo(a,l),t.lineWidth=2,t.fillStyle="rgba(255, 255, 255, 0.7)",t.strokeStyle="rgba(255, 255, 255, 0.7)",t.stroke(),t[i](),t.globalCompositeOperation=n?"xor":"destination-over"},r=function(t,e){return Math.round(Math.random()*(e-t)+t)},a=new Image;a.crossOrigin="Anonymous",t=0,a.onload=function(){e.x=r(o+10,e.options.width-(o+10)),e.y=r(10+2*e.options.sliderR,e.options.height-(o+10)),s(e.canvasCtx,"fill"),s(e.blockCtx,"clip"),e.canvasCtx.drawImage(a,0,0,e.options.width-2,e.options.height),e.blockCtx.drawImage(a,0,0,e.options.width-2,e.options.height);var t=e.y-2*e.options.sliderR-1,n=e.blockCtx.getImageData(e.x-3,t,o,o);e.block.width=o,e.blockCtx.putImageData(n,0,t+1),e.text.textContent=e.text.getAttribute("data-text")},a.onerror=function(){if(t++,"file:"===window.location.protocol&&(t=e.options.maxLoadCount,console.error("can't load pic resource file from File protocal. Please try http or https")),t>=e.options.maxLoadCount)return e.text.textContent="加载失败",void e.classList.add("text-danger");a.src=e.options.localImages()},a.setSrc=function(){var o,s="";t=0,e.text.classList.remove("text-danger"),i(e.options.setSrc)&&(s=e.options.setSrc()),s&&""!==s||(s="https://picsum.photos/"+e.options.width+"/"+e.options.height+"/?image="+Math.round(200*Math.random())),n?(o=new XMLHttpRequest,o.onloadend=function(t){var e=new FileReader;e.readAsDataURL(t.target.response),e.onloadend=function(t){a.src=t.target.result}},o.open("GET",s),o.responseType="blob",o.send()):a.src=s},a.setSrc(),this.text.setAttribute("data-text",this.options.barText),this.text.textContent=this.options.loadingText,this.img=a},e.clean=function(){this.canvasCtx.clearRect(0,0,this.options.width,this.options.height),this.blockCtx.clearRect(0,0,this.options.width,this.options.height),this.block.width=this.options.width},e.bindEvents=function(){var t=this;this.$element.addEventListener("selectstart",(function(){return!1})),this.refreshIcon.addEventListener("click",(function(){t.text.textContent=t.options.barText,t.reset(),i(t.options.onRefresh)&&t.options.onRefresh.call(t.$element)}));var e,n,o=[],s=!1,r=function(i){t.text.classList.contains("text-danger")||(e=i.clientX||i.touches[0].clientX,n=i.clientY||i.touches[0].clientY,s=!0)},a=function(i){var r;if(!s)return!1;var a=i.clientX||i.touches[0].clientX,l=i.clientY||i.touches[0].clientY,c=a-e,d=l-n;if(c<0||c+40>t.options.width)return!1;t.slider.style.left=c-1+"px",r=(t.options.width-60)/(t.options.width-40)*c,t.block.style.left=r+"px",t.sliderContainer.classList.add("sliderContainer_active"),t.sliderMask.style.width=c+4+"px",o.push(Math.round(d))},l=function(n){var r,a;if(!s||(s=!1,r=n.clientX||n.changedTouches[0].clientX,r===e))return!1;t.sliderContainer.classList.remove("sliderContainer_active"),t.trail=o,a=t.verify(),a.spliced&&a.verified?(t.sliderContainer.classList.add("sliderContainer_success"),i(t.options.onSuccess)&&t.options.onSuccess.call(t.$element,o)):(t.sliderContainer.classList.add("sliderContainer_fail"),i(t.options.onFail)&&t.options.onFail.call(t.$element),setTimeout((function(){t.text.innerHTML=t.options.failedText,t.reset()}),1e3))};this.slider.addEventListener("mousedown",r),this.slider.addEventListener("touchstart",r),document.addEventListener("mousemove",a),document.addEventListener("touchmove",a),document.addEventListener("mouseup",l),document.addEventListener("touchend",l),document.addEventListener("mousedown",(function(){return!1})),document.addEventListener("touchstart",(function(){return!1})),document.addEventListener("swipe",(function(){return!1}))},e.verify=function(){var t=this.trail,e=parseInt(this.block.style.left),n=!1;if(null!==this.options.remoteUrl)n=this.options.verify(t,this.options.remoteUrl);else{var i=function(t,e){return t+e},o=function(t){return t*t},s=t.reduce(i)/t.length,r=t.map((function(t){return t-s})),a=Math.sqrt(r.map(o).reduce(i)/t.length);n=0!==a}return{spliced:Math.abs(e-this.x)<this.options.offset,verified:n}},e.reset=function(){this.sliderContainer.classList.remove("sliderContainer_fail"),this.sliderContainer.classList.remove("sliderContainer_success"),this.slider.style.left=0,this.block.style.left=0,this.sliderMask.style.width=0,this.clean(),this.text.setAttribute("data-text",this.text.textContent),this.text.textContent=this.options.loadingText,this.img.setSrc()}})()},7973:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return M}});var i=n(3396),o=n(7139),s=n(4870),r=n(9242),a=n(5027),l=n(2483),c=n(65),d=n(6431),u=n(9733),h=n(1078);n(9663);const p={class:"behavior"},f={class:"captcha",id:"captcha"};var v={__name:"SliderCaptcha",props:{show:Boolean,page:String},setup(t){const{page:e}=t;let n=(0,l.tv)(),o=null;return(0,i.bv)((()=>{o=sliderCaptcha({id:"captcha",onSuccess(){d.V.alert({message:"登录成功"}).then((()=>{n.push(e)}))},onFail(){o.reset()},verify(){return!0}})})),(e,n)=>{const o=(0,i.up)("van-overlay");return(0,i.wg)(),(0,i.iD)("div",p,[(0,i.Wm)(o,{show:t.show},null,8,["show"]),(0,i.wy)((0,i._)("div",f,null,512),[[r.F8,t.show]])])}}},m=n(89);const g=(0,m.Z)(v,[["__scopeId","data-v-b2daa05a"]]);var x=g;const w=t=>((0,i.dD)("data-v-9565e130"),t=t(),(0,i.Cn)(),t),C={class:"loginpage"},y={class:"homepage"},b=w((()=>(0,i._)("div",{class:"head"},[(0,i._)("img",{src:a,alt:""})],-1))),L={class:"box"},_={class:"yuan"},k={class:"bottom"},T=w((()=>(0,i._)("span",null,"立即注册",-1))),I=w((()=>(0,i._)("p",null,null,-1)));var S={__name:"Login",setup(t){const e=(0,c.oR)();let n=(0,l.yj)(),a=(0,s.iH)(""),p=(0,s.iH)(""),f=(0,s.iH)(!0),v=(0,s.iH)(""),m=(0,s.iH)(!1),g=(0,s.iH)(n.query.redirect),w=(0,i.Fl)((()=>{let t=(0,h.tQ)(a);return t})),S=(0,i.Fl)((()=>{let t=(0,h.GE)(p);return t}));const E=async()=>{let t=(0,h.Y2)([a,p]);if(t){if(!w.value&&!S.value){let t={password:p.value,phone:a.value};try{await e.dispatch("user/changeIsLogin",t),m.value=!0}catch(n){(0,d.V)({message:n.response.data.msg})}}}else(0,d.V)({message:"请填写完整！"})},M=()=>{(0,u.F)({message:"未开通",position:"top"})},U=()=>{f.value=!f.value,v.value.type=f.value?"password":"text"};return(t,e)=>{const n=(0,i.up)("van-icon"),l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",C,[(0,i._)("div",y,[b,(0,i.wy)((0,i._)("input",{type:"text",ref:"phone",class:(0,o.C_)({green:!(0,s.SU)(w)}),"onUpdate:modelValue":e[0]||(e[0]=t=>(0,s.dq)(a)?a.value=t:a=t),placeholder:"请输入手机号码"},null,2),[[r.nr,(0,s.SU)(a)]]),(0,i._)("div",L,[(0,i.wy)((0,i._)("input",{type:"password",ref_key:"pwd",ref:v,class:(0,o.C_)({green:!(0,s.SU)(S)}),"onUpdate:modelValue":e[1]||(e[1]=t=>(0,s.dq)(p)?p.value=t:p=t),placeholder:"请输入密码"},null,2),[[r.nr,(0,s.SU)(p)]]),(0,i._)("div",_,[(0,i.wy)((0,i.Wm)(n,{onClick:U,name:"closed-eye"},null,512),[[r.F8,(0,s.SU)(f)]]),(0,i.wy)((0,i.Wm)(n,{onClick:U,name:"eye-o"},null,512),[[r.F8,!(0,s.SU)(f)]])])]),(0,i._)("button",{onClick:E},"登录"),(0,i._)("div",k,[(0,i.Wm)(l,{to:"registered"},{default:(0,i.w5)((()=>[T])),_:1}),I,(0,i._)("span",{onClick:M},"忘记密码")])]),(0,i.Wm)(x,{show:(0,s.SU)(m),page:(0,s.SU)(g)},null,8,["show","page"])])}}};const E=(0,m.Z)(S,[["__scopeId","data-v-9565e130"]]);var M=E},5027:function(t,e,n){"use strict";t.exports=n.p+"img/编组@3x.67cef7bf.png"}}]);
//# sourceMappingURL=973.57967a1a.js.map