{"version":3,"file":"js/901.b06f7609.js","mappings":"gsBA8EA,IAAIA,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MACZD,EAAME,MAAMC,MAAQ,EACpB,IAAIC,GAAWC,EAAAA,EAAAA,IAAI,IACfC,GAAUD,EAAAA,EAAAA,IAAI,GACdE,GAAaF,EAAAA,EAAAA,IAAI,CAAE,YAA+B,IAAlBC,EAAQE,QACxCC,GAAOJ,EAAAA,EAAAA,IAAI,IACXK,GAAWL,EAAAA,EAAAA,KAAI,GAEnBM,eAAeC,KACbC,EAAAA,EAAAA,MAEA,IAAIC,QAAaC,EAAAA,EAAAA,IAAI,gBAAiB,CAAEC,WAAY,MACpDV,EAAQE,MAAQM,EAAKG,OAAOC,OAE5B,IAAIC,QAAYJ,EAAAA,EAAAA,IAAK,UAASnB,EAAMwB,MAAMC,OAC1CjB,EAASI,MAAQW,EAAIF,OACrBR,EAAKD,MAAQJ,EAASI,MAAMc,SAC7B,CAVDV,IAYA,MAAMW,EAAS,KACbb,EAASF,OAASE,EAASF,KAA3B,EAGF,IAAIgB,EAAO,EACX,MAAMC,EAAUd,UACda,IACA,IAAIE,EAAQ1B,EAAME,MAAMyB,KAAKD,MACzBE,EAAO,CACTC,SAAUjC,EAAMwB,MAAMC,IACtBS,IAAKN,EACLR,WAAY,OAEd,GAAa,IAATU,EACF5B,EAAOiC,KAAK,cACP,OACCC,EAAAA,EAAAA,IAAK,gBAAiBJ,GAC5B,IAAId,QAAaC,EAAAA,EAAAA,IAAI,gBAAiB,CAAEC,WAAY,MACpDV,EAAQE,MAAQM,EAAKG,OAAOC,OAC5Be,EAAAA,EAAAA,QAAc,QACf,GAGGC,EAAS,MACbrB,EAAAA,EAAAA,MACAb,EAAME,MAAMiC,UAAUC,SAAWhC,EAASI,MAC1CV,EAAOiC,KAAK,cAAZ,EAGIM,EAAY,MAChBxB,EAAAA,EAAAA,MACAf,EAAOiC,KAAK,YAAZ,EAIIO,EAAW,KACftC,EAAMuC,OAAO,mBAAoB,QACjCC,QAAQC,MAAR,EAGIC,GAAYrC,EAAAA,EAAAA,KAAI,GAChBsC,EAAU,CACd,CAAEC,KAAM,KAAMC,KAAM,UACpB,CAAED,KAAM,KAAMC,KAAM,SACpB,CAAED,KAAM,OAAQC,KAAM,QACtB,CAAED,KAAM,OAAQC,KAAM,UACtB,CAAED,KAAM,MAAOC,KAAM,W,4sDC3IvB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://demo/./src/views/shopping/ShopPage.vue","webpack://demo/./src/views/shopping/ShopPage.vue?c603"],"sourcesContent":["<template>\r\n  <div class=\"body\">\r\n    <div class=\"page\">\r\n      <header>\r\n        <div class=\"left\" @click=\"goToHome\">\r\n          <span></span>\r\n        </div>\r\n        <div class=\"right\" @click=\"showShare = !showShare\">\r\n          <span></span>\r\n          <van-share-sheet\r\n            :show=\"showShare\"\r\n            title=\"立即分享给好友\"\r\n            :options=\"options\"\r\n          />\r\n        </div>\r\n      </header>\r\n      <!-- banner -->\r\n      <van-swipe>\r\n        <van-swipe-item v-for=\"item in goodList.s_goods_photos\" :key=\"item.id\">\r\n          <img :src=\"item.path\" alt=\"\" />\r\n        </van-swipe-item>\r\n        <template #indicator=\"{ active, total }\">\r\n          <div class=\"custom-indicator\">{{ active + 1 }}/{{ total }}</div>\r\n        </template>\r\n      </van-swipe>\r\n\r\n      <div class=\"content\">\r\n        <div class=\"price\">\r\n          <span> ￥{{ goodList.price - goodList.sale_price }} </span>\r\n          <p class=\"textP\">￥{{ goodList.price }}</p>\r\n        </div>\r\n        <div class=\"text\">\r\n          <h5 class=\"shopName\">{{ goodList.name }}</h5>\r\n          <p class=\"shopDesc\">{{ goodList.desc }}</p>\r\n        </div>\r\n        <div class=\"tetxHTML\" v-html=\"text\"></div>\r\n      </div>\r\n\r\n      <footer>\r\n        <van-action-bar>\r\n          <van-action-bar-icon icon=\"chat-o\" text=\"客服\" @click=\"goShop\" />\r\n          <van-action-bar-icon\r\n            icon=\"cart-o\"\r\n            text=\"购物车\"\r\n            :badge=\"cartMsg\"\r\n            :badge-props=\"cartMsgObj\"\r\n            @click=\"goToOeder\"\r\n          />\r\n          <van-action-bar-icon icon=\"shop-o\" text=\"店铺\" @click=\"goShop\" />\r\n          <van-action-bar-button\r\n            type=\"danger\"\r\n            text=\"加入购物车\"\r\n            @click=\"addCart\"\r\n          />\r\n          <van-action-bar-button\r\n            type=\"danger\"\r\n            text=\"立即购买\"\r\n            @click=\"addBuy\"\r\n          />\r\n        </van-action-bar>\r\n      </footer>\r\n\r\n      <van-action-sheet v-model:show=\"showShow\" title=\"请添加客服wx咨询\">\r\n        <div class=\"actionImg\">\r\n          <img src=\"../../assets/image/wxShop.jpg\" alt=\"\" />\r\n        </div>\r\n      </van-action-sheet>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { Toast } from 'vant';\r\nimport { ref } from 'vue'\r\nimport { get, post } from '../../Utils/request.js'\r\nimport { toast } from '../../Utils/index.js'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex';\r\nlet route = useRoute()\r\nlet router = useRouter()\r\nlet store = useStore()\r\nstore.state.index = 1\r\nlet goodList = ref([])\r\nlet cartMsg = ref(0)\r\nlet cartMsgObj = ref({ \"show-zero\": cartMsg.value === 0 ? false : true })\r\nlet text = ref('')\r\nlet showShow = ref(false)\r\ngetShop()\r\nasync function getShop () {\r\n  toast()\r\n  // 购物车商品数量\r\n  let shop = await get('/shoppingCart', { project_id: 240 })\r\n  cartMsg.value = shop.result.length\r\n  //   请求商品\r\n  let res = await get(`/goods/${route.query.key}`)\r\n  goodList.value = res.result\r\n  text.value = goodList.value.rich_text\r\n}\r\n// 客服\r\nconst goShop = () => {\r\n  showShow.value = !showShow.value\r\n}\r\n// 加入购物车\r\nlet flag = 0\r\nconst addCart = async () => {\r\n  flag++\r\n  let token = store.state.user.token\r\n  let body = {\r\n    goods_id: route.query.key,\r\n    num: flag,\r\n    project_id: '240'\r\n  }\r\n  if (token == '') {\r\n    router.push('/login')\r\n  } else {\r\n    await post('/shoppingCart', body)\r\n    let shop = await get('/shoppingCart', { project_id: 240 })\r\n    cartMsg.value = shop.result.length\r\n    Toast.success('加入成功！');\r\n  }\r\n}\r\n// 立即购买\r\nconst addBuy = () => {\r\n  toast()\r\n  store.state.shoporder.cradList = goodList.value\r\n  router.push('/orderpageT')\r\n}\r\n// go购物车\r\nconst goToOeder = () => {\r\n  toast()\r\n  router.push('/shopping')\r\n}\r\n\r\n// 返回\r\nconst goToHome = () => {\r\n  store.commit(\"changeRouterType\", \"back\")\r\n  history.back()\r\n}\r\n// 分享\r\nconst showShare = ref(false);\r\nconst options = [\r\n  { name: '微信', icon: 'wechat' },\r\n  { name: '微博', icon: 'weibo' },\r\n  { name: '复制链接', icon: 'link' },\r\n  { name: '分享海报', icon: 'poster' },\r\n  { name: '二维码', icon: 'qrcode' },\r\n];\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.body {\r\n  width: 100%;\r\n  min-height: calc(100vh - 4.4rem);\r\n  background-color: #f6f6f6;\r\n}\r\nheader {\r\n  width: 100%;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  z-index: 8;\r\n  span {\r\n    display: inline-block;\r\n    width: 20px;\r\n    height: 20px;\r\n  }\r\n  .left {\r\n    background-color: #666;\r\n    padding: 5px;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 20px;\r\n    margin: 7px 0 0 5px;\r\n    span {\r\n      background: url(\"../../assets/image/返回.png\") no-repeat;\r\n      background-size: 20px 20px;\r\n      margin: 0;\r\n      z-index: 9;\r\n    }\r\n  }\r\n  .right {\r\n    background-color: #666;\r\n    padding: 5px;\r\n    width: 20px;\r\n    height: 20px;\r\n    border-radius: 20px;\r\n    margin: 7px 5px 0 0;\r\n    span {\r\n      background: url(\"../../assets/image/更多.png\") no-repeat;\r\n      background-size: 20px 20px;\r\n      margin: 0;\r\n      z-index: 9;\r\n    }\r\n  }\r\n}\r\n.van-swipe {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 3.9rem;\r\n  z-index: 1;\r\n  img {\r\n    width: 100%;\r\n    height: 3.9rem;\r\n    object-fit: cover;\r\n  }\r\n}\r\n.custom-indicator {\r\n  position: absolute;\r\n  bottom: 5px;\r\n  font-size: 12px;\r\n  background: rgba(0, 0, 0, 0.1);\r\n  border-radius: 10px 0 0 10px;\r\n  color: #fff;\r\n  height: 20px;\r\n  line-height: 20px;\r\n  padding: 0 10px;\r\n  right: 0;\r\n  z-index: 20;\r\n}\r\n.content {\r\n  margin-top: 4rem;\r\n  padding-left: 00.16rem;\r\n  padding-right: 00.16rem;\r\n  background-color: #fff;\r\n  .price {\r\n    display: flex;\r\n    span {\r\n      font-size: 30px;\r\n      color: #e93b3b;\r\n      font-weight: 600;\r\n    }\r\n    .textP {\r\n      padding-left: 00.1rem;\r\n      //   padding-top: 0.01rem;\r\n      line-height: 30px;\r\n      font-size: 14px;\r\n      color: #999999;\r\n      text-decoration: line-through;\r\n    }\r\n  }\r\n  .text {\r\n    h5 {\r\n      font-size: 00.16rem;\r\n      margin-top: 00.1rem;\r\n      color: #333333;\r\n    }\r\n    .shopDesc {\r\n      color: #333333;\r\n      line-height: 1.5;\r\n      margin-top: 00.05rem;\r\n      margin-right: 00.1rem;\r\n      margin-bottom: 00.1rem;\r\n      display: -webkit-box;\r\n      -webkit-box-orient: vertical;\r\n      -webkit-line-clamp: 2;\r\n      overflow: hidden;\r\n    }\r\n  }\r\n  .tetxHTML {\r\n    padding-bottom: 00.5rem;\r\n  }\r\n}\r\n.actionImg {\r\n  display: flex;\r\n  justify-content: center;\r\n  img {\r\n    width: 2rem;\r\n    height: 2rem;\r\n  }\r\n}\r\n</style>","import script from \"./ShopPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ShopPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ShopPage.vue?vue&type=style&index=0&id=30a803a1&lang=scss&scoped=true\"\n\nimport exportComponent from \"F:\\\\My-project\\\\shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-30a803a1\"]])\n\nexport default __exports__"],"names":["route","useRoute","router","useRouter","store","useStore","state","index","goodList","ref","cartMsg","cartMsgObj","value","text","showShow","async","getShop","toast","shop","get","project_id","result","length","res","query","key","rich_text","goShop","flag","addCart","token","user","body","goods_id","num","push","post","Toast","addBuy","shoporder","cradList","goToOeder","goToHome","commit","history","back","showShare","options","name","icon","__exports__"],"sourceRoot":""}