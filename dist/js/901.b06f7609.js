"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[901],{9901:function(e,a,t){t.r(a),t.d(a,{default:function(){return T}});var n=t(3396),s=t(7139),o=t(4870),l=t(476),i=t(9733),c=t(5743),u=t(6329),p=t(2483),r=t(65);const d=e=>((0,n.dD)("data-v-30a803a1"),e=e(),(0,n.Cn)(),e),v={class:"body"},h={class:"page"},_=d((()=>(0,n._)("span",null,null,-1))),w=[_],m=d((()=>(0,n._)("span",null,null,-1))),g=["src"],k={class:"custom-indicator"},b={class:"content"},f={class:"price"},U={class:"textP"},x={class:"text"},y={class:"shopName"},C={class:"shopDesc"},S=["innerHTML"],H=d((()=>(0,n._)("div",{class:"actionImg"},[(0,n._)("img",{src:l,alt:""})],-1)));var W={__name:"ShopPage",setup(e){let a=(0,p.yj)(),t=(0,p.tv)(),l=(0,r.oR)();l.state.index=1;let d=(0,o.iH)([]),_=(0,o.iH)(0),W=(0,o.iH)({"show-zero":0!==_.value}),z=(0,o.iH)(""),j=(0,o.iH)(!1);async function T(){(0,u.Am)();let e=await(0,c.U2)("/shoppingCart",{project_id:240});_.value=e.result.length;let t=await(0,c.U2)(`/goods/${a.query.key}`);d.value=t.result,z.value=d.value.rich_text}T();const q=()=>{j.value=!j.value};let D=0;const L=async()=>{D++;let e=l.state.user.token,n={goods_id:a.query.key,num:D,project_id:"240"};if(""==e)t.push("/login");else{await(0,c.v_)("/shoppingCart",n);let e=await(0,c.U2)("/shoppingCart",{project_id:240});_.value=e.result.length,i.F.success("加入成功！")}},A=()=>{(0,u.Am)(),l.state.shoporder.cradList=d.value,t.push("/orderpageT")},M=()=>{(0,u.Am)(),t.push("/shopping")},I=()=>{l.commit("changeRouterType","back"),history.back()},P=(0,o.iH)(!1),R=[{name:"微信",icon:"wechat"},{name:"微博",icon:"weibo"},{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"}];return(e,a)=>{const t=(0,n.up)("van-share-sheet"),l=(0,n.up)("van-swipe-item"),i=(0,n.up)("van-swipe"),c=(0,n.up)("van-action-bar-icon"),u=(0,n.up)("van-action-bar-button"),p=(0,n.up)("van-action-bar"),r=(0,n.up)("van-action-sheet");return(0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",h,[(0,n._)("header",null,[(0,n._)("div",{class:"left",onClick:I},w),(0,n._)("div",{class:"right",onClick:a[0]||(a[0]=e=>P.value=!P.value)},[m,(0,n.Wm)(t,{show:P.value,title:"立即分享给好友",options:R},null,8,["show"])])]),(0,n.Wm)(i,null,{indicator:(0,n.w5)((({active:e,total:a})=>[(0,n._)("div",k,(0,s.zw)(e+1)+"/"+(0,s.zw)(a),1)])),default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,o.SU)(d).s_goods_photos,(e=>((0,n.wg)(),(0,n.j4)(l,{key:e.id},{default:(0,n.w5)((()=>[(0,n._)("img",{src:e.path,alt:""},null,8,g)])),_:2},1024)))),128))])),_:1}),(0,n._)("div",b,[(0,n._)("div",f,[(0,n._)("span",null," ￥"+(0,s.zw)((0,o.SU)(d).price-(0,o.SU)(d).sale_price),1),(0,n._)("p",U,"￥"+(0,s.zw)((0,o.SU)(d).price),1)]),(0,n._)("div",x,[(0,n._)("h5",y,(0,s.zw)((0,o.SU)(d).name),1),(0,n._)("p",C,(0,s.zw)((0,o.SU)(d).desc),1)]),(0,n._)("div",{class:"tetxHTML",innerHTML:(0,o.SU)(z)},null,8,S)]),(0,n._)("footer",null,[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{icon:"chat-o",text:"客服",onClick:q}),(0,n.Wm)(c,{icon:"cart-o",text:"购物车",badge:(0,o.SU)(_),"badge-props":(0,o.SU)(W),onClick:M},null,8,["badge","badge-props"]),(0,n.Wm)(c,{icon:"shop-o",text:"店铺",onClick:q}),(0,n.Wm)(u,{type:"danger",text:"加入购物车",onClick:L}),(0,n.Wm)(u,{type:"danger",text:"立即购买",onClick:A})])),_:1})]),(0,n.Wm)(r,{show:(0,o.SU)(j),"onUpdate:show":a[1]||(a[1]=e=>(0,o.dq)(j)?j.value=e:j=e),title:"请添加客服wx咨询"},{default:(0,n.w5)((()=>[H])),_:1},8,["show"])])])}}},z=t(89);const j=(0,z.Z)(W,[["__scopeId","data-v-30a803a1"]]);var T=j},476:function(e,a,t){e.exports=t.p+"img/wxShop.130f00b9.jpg"}}]);
//# sourceMappingURL=901.b06f7609.js.map