{"version":3,"file":"js/50.685dfa57.js","mappings":"sWAkCA,IAAIA,GAAQC,EAAAA,EAAAA,MAMRC,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAETC,IADQC,EAAAA,EAAAA,IAAI,IACPA,EAAAA,EAAAA,IAAIL,EAAMM,MAAMC,MACrBC,GAAOH,EAAAA,EAAAA,IAAI,CAAC,GAGhBI,eAAeC,KACbC,EAAAA,EAAAA,MACA,IAAIC,QAAYC,EAAAA,EAAAA,IAAI,YAChBC,EAAMF,EAAIG,OAAOC,MAAKC,GAAOA,EAAIb,IAAMA,EAAGc,QAC9CV,EAAKU,MAAQ,CACXC,KAAML,EAAIK,KACVC,IAAKN,EAAIO,MACTC,SAAUR,EAAIS,UACdC,cAAeV,EAAIW,KACnBC,SAAUZ,EAAIa,KACdC,WAAYd,EAAIe,UAChBC,UAA+B,MAApBhB,EAAIiB,YAElB,CAdDrB,IAiBA,MAAMsB,EAAc,KAClBlC,EAAMmC,OAAO,mBAAoB,QACjC/B,EAAOgC,KAAK,WAAZ,EAMIC,EAAS1B,UAEb,GAAI2B,EAAKN,UAAW,OACFO,EAAAA,EAAAA,IAAM,eAAcjC,EAAGc,QACxC,CAED,IAAIoB,EAAO,CACTnB,KAAMiB,EAAKjB,KACXE,MAAOe,EAAKhB,IACZG,UAAWa,EAAKG,KAChBd,KAAMW,EAAKZ,cACXG,KAAMS,EAAKV,SACXG,UAAWO,EAAKR,WAChBY,OAAQ,WAESC,EAAAA,EAAAA,IAAK,YAAWrC,EAAGc,QAASoB,IAC/CI,EAAAA,EAAAA,GAAM,CACJC,QAAS,OACTC,SAAU,QAEZ1C,EAAOgC,KAAK,WAAZ,EAIIW,EAAcC,IAClBC,EAAAA,EAAAA,QAAe,CACbC,MAAO,QACPL,QACE,eAEDM,MAAK,MACJC,EAAAA,EAAAA,IAAK,YAAWJ,KAAOG,MAAKrC,KAC1B8B,EAAAA,EAAAA,GAAM,CACJC,QAAS,OACTC,SAAU,QAEZ9C,EAAMmC,OAAO,mBAAoB,QACjC/B,EAAOgC,KAAK,WAAZ,GANF,IAQCiB,OAAM,QAdX,E,8kBC1FF,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://demo/./src/views/address/Edit.vue","webpack://demo/./src/views/address/Edit.vue?f8ee"],"sourcesContent":["<template>\r\n  <div class=\"body\">\r\n    <div class=\"page\">\r\n      <div class=\"top\">\r\n        <van-nav-bar\r\n          title=\"编辑收货地址\"\r\n          left-arrow\r\n          @click-left=\"onClickLeft\"\r\n        />\r\n      </div>\r\n      <div class=\"main\">\r\n        <div class=\"box\">\r\n          <van-address-edit\r\n            :area-list=\"areaList\"\r\n            area-placeholder=\"选择省 / 市 / 区\"\r\n            show-postal\r\n            show-set-default\r\n            show-delete\r\n            :address-info=\"list\"\r\n            :is-saving=\"false\"\r\n            :is-deleting=\"false\"\r\n            :area-columns-placeholder=\"['请选择', '请选择', '请选择']\"\r\n            @save=\"onSave\"\r\n            @delete=\"delAddress(route.query.key)\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\nlet store = useStore()\r\nimport { Toast, Dialog } from 'vant';\r\nimport { toast } from '../../Utils/index.js'\r\nimport { get, post, put, del } from '../../Utils/request.js'\r\nimport { areaList } from '@vant/area-data';\r\nimport { useRoute, useRouter } from 'vue-router'\r\nlet route = useRoute()\r\nlet router = useRouter()\r\nlet value = ref(0)\r\nlet id = ref(route.query.key)\r\nlet list = ref({})\r\n\r\ngetID()\r\nasync function getID () {\r\n  toast()\r\n  let res = await get('/address')\r\n  let obj = res.result.find(ele => ele.id == id.value);\r\n  list.value = {\r\n    name: obj.name,\r\n    tel: obj.phone,\r\n    province: obj.area_name,\r\n    addressDetail: obj.desc,\r\n    areaCode: obj.area,\r\n    postalCode: obj.post_code,\r\n    isDefault: obj.default_set === '1' ? true : false\r\n  }\r\n}\r\n\r\n// 返回\r\nconst onClickLeft = () => {\r\n  store.commit(\"changeRouterType\", \"back\")\r\n  router.push('/address')\r\n  //   history.back()\r\n}\r\n\r\n\r\n// 获取表单内容\r\nconst onSave = async (data) => {\r\n  // 设置默认地址\r\n  if (data.isDefault) {\r\n    let res = await post(`/setDefault/${id.value}`)\r\n  }\r\n  //   更新表单\r\n  let body = {\r\n    name: data.name,\r\n    phone: data.tel,\r\n    area_name: data.city,\r\n    desc: data.addressDetail,\r\n    area: data.areaCode,\r\n    post_code: data.postalCode,\r\n    status: '1'\r\n  }\r\n  let putRes = await put(`/address/${id.value}`, body)\r\n  Toast({\r\n    message: '保存成功',\r\n    position: 'top',\r\n  })\r\n  router.push('/address')\r\n};\r\n\r\n// 删除选中\r\nconst delAddress = (val) => {\r\n  Dialog.confirm({\r\n    title: '小xu提示',\r\n    message:\r\n      '您是否确认删除地址?',\r\n  })\r\n    .then(() => {\r\n      del(`/address/${val}`).then(res => {\r\n        Toast({\r\n          message: '删除成功',\r\n          position: 'top',\r\n        })\r\n        store.commit(\"changeRouterType\", \"back\")\r\n        router.push('/address')\r\n      })\r\n    }).catch(() => { });\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.body {\r\n  width: 100%;\r\n  min-height: 100%;\r\n  background-color: #f6f6f6;\r\n}\r\n.top {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n}\r\n.main {\r\n  min-height: calc(100vh - 0.5rem);\r\n  padding-top: 00.5rem;\r\n  .box {\r\n    ul {\r\n      width: 3.39rem;\r\n      margin: 0 auto;\r\n      font-size: 0.14rem;\r\n      color: #666666;\r\n      input {\r\n        border: none;\r\n        outline: none;\r\n      }\r\n      li {\r\n        display: flex;\r\n        align-items: center;\r\n        height: 0.44rem;\r\n        border-bottom: 1px solid #f1f1f1;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import script from \"./Edit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Edit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Edit.vue?vue&type=style&index=0&id=0a3c5c40&lang=scss&scoped=true\"\n\nimport exportComponent from \"F:\\\\My-project\\\\shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0a3c5c40\"]])\n\nexport default __exports__"],"names":["store","useStore","route","useRoute","router","useRouter","id","ref","query","key","list","async","getID","toast","res","get","obj","result","find","ele","value","name","tel","phone","province","area_name","addressDetail","desc","areaCode","area","postalCode","post_code","isDefault","default_set","onClickLeft","commit","push","onSave","data","post","body","city","status","put","Toast","message","position","delAddress","val","Dialog","title","then","del","catch","__exports__"],"sourceRoot":""}