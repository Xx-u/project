{"version":3,"file":"js/91.32524665.js","mappings":"mfAoFA,IAAIA,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,IAAI,GACbC,GAAYD,EAAAA,EAAAA,IAAI,IAEhBE,GAAQF,EAAAA,EAAAA,IAAI,CACd,CAAEG,GAAI,EAAGC,KAAM,WAAYC,KAAM,MACjC,CAAEF,GAAI,EAAGC,KAAM,aAAcC,KAAM,OACnC,CAAEF,GAAI,EAAGC,KAAM,cAAeC,KAAM,OACpC,CAAEF,GAAI,EAAGC,KAAM,YAAaC,KAAM,OAClC,CAAEF,GAAI,EAAGC,KAAM,cAAeC,KAAM,SAMtCC,eAAeC,EAAUC,GACvB,IAAIC,QAAYC,EAAAA,EAAAA,IAAI,SAAU,CAAEC,WAAY,IAAKC,OAAQJ,IACzDP,EAAUY,MAAQJ,EAAIK,OAAOC,IAC9B,EALDC,EAAAA,EAAAA,MACAT,IAOA,MAAMU,EAAcC,KAClBF,EAAAA,EAAAA,MACAjB,EAAOc,MAAQK,EACfX,EAAiB,GAARW,EAAY,GAAKA,EAA1B,EAIIC,EAAWb,UACfc,EAAAA,EAAAA,QAAe,CACblB,MAAO,QACPmB,QACE,eAEDC,MAAK,MACJC,EAAAA,EAAAA,IAAK,UAASpB,KAAMmB,MAAKb,KACvBe,EAAAA,EAAAA,GAAMf,EAAIgB,KACVlB,GAAU,GAFZ,IAICmB,OAAM,QAVX,EAaIC,EAAaxB,IACjBN,EAAM+B,OAAO,mBAAoB,QACjCjC,EAAOkC,KAAM,qBAAoB1B,IAAjC,EAGI2B,EAAa3B,IACjBN,EAAM+B,OAAO,mBAAoB,QACjCjC,EAAOkC,KAAM,iBAAgB1B,IAA7B,E,04DChIF,MAAM4B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://demo/./src/views/order/Order.vue","webpack://demo/./src/views/order/Order.vue?5152"],"sourcesContent":["<template>\r\n  <div class=\"body\">\r\n    <div class=\"page\">\r\n      <div class=\"top\">\r\n        <van-nav-bar title=\"我的订单\" />\r\n      </div>\r\n      <div class=\"main\">\r\n        <div class=\"label\">\r\n          <van-tabs\r\n            v-model:active=\"active\"\r\n            swipeable\r\n            @change=\"clickOrder\"\r\n            lazy-render\r\n            sticky\r\n          >\r\n            <van-tab v-for=\"item in title\" :key=\"item.id\" :name=\"item.id\">\r\n              <template #title>\r\n                <p>{{ item.span }}</p>\r\n              </template>\r\n              <div class=\"card\" v-for=\"Oritem in orderList\" :key=\"Oritem.id\">\r\n                <div class=\"shop\">\r\n                  <span>{{ Oritem.shops_name }} 的店铺</span>\r\n                </div>\r\n                <div\r\n                  class=\"goodsOrder\"\r\n                  v-for=\"goodsItem in JSON.parse(Oritem.goods_info)\"\r\n                  :key=\"goodsItem.id\"\r\n                >\r\n                  <van-card\r\n                    :num=\"goodsItem.num\"\r\n                    :price=\"goodsItem.price\"\r\n                    :desc=\"goodsItem.desc\"\r\n                    :title=\"goodsItem.goods_name\"\r\n                    :thumb=\"goodsItem.s_goods_photos[0].path\"\r\n                    @click=\"checkCard(goodsItem.id)\"\r\n                  />\r\n                </div>\r\n                <div class=\"choose\">\r\n                  <span>总价: ￥{{ Oritem.total_price }}</span>\r\n                  <div class=\"button\">\r\n                    <van-button round size=\"small\" type=\"default\"\r\n                      >编辑订单</van-button\r\n                    >\r\n                    <van-button\r\n                      round\r\n                      size=\"small\"\r\n                      type=\"default\"\r\n                      @click=\"delOrder(Oritem.id)\"\r\n                      >删除订单</van-button\r\n                    >\r\n                    <van-button\r\n                      round\r\n                      color=\"linear-gradient(to right, #ff6034, #ee0a24)\"\r\n                      size=\"small\"\r\n                      type=\"default\"\r\n                      @click=\"pustGoods(Oritem.id)\"\r\n                      v-show=\"Oritem.status == 1\"\r\n                      >去支付</van-button\r\n                    >\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"hint\" v-show=\"orderList.length == 0\">\r\n                <van-empty\r\n                  image=\"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png\"\r\n                  image-size=\"130\"\r\n                  description=\"你还没有相关的订单\"\r\n                />\r\n              </div>\r\n            </van-tab>\r\n          </van-tabs>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { Toast, Dialog } from 'vant';\r\nimport { ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\nimport { toast } from '../../Utils/index.js'\r\nimport { get, del, post } from '../../Utils/request.js'\r\nlet router = useRouter()\r\nlet store = useStore()\r\nlet active = ref(0)\r\nlet orderList = ref([])\r\n// 声明状态\r\nlet title = ref([\r\n  { id: 8, icon: 'orders-o', span: '全部' },\r\n  { id: 1, icon: 'credit-pay', span: '待付款' },\r\n  { id: 2, icon: 'send-gift-o', span: '待发货' },\r\n  { id: 3, icon: 'logistics', span: '待收货' },\r\n  { id: 6, icon: 'certificate', span: '已完成' }\r\n])\r\n\r\n// 进入订单页面触发\r\ntoast()\r\norderGet()\r\nasync function orderGet (node) {\r\n  let res = await get('/order', { project_id: 240, status: node })\r\n  orderList.value = res.result.rows\r\n}\r\n// 点击切换触发\r\n// -1：已删除，0：已过期，1:已下单，2:已支付，3:已发货, 4:退货中，5:退款中，6:已完成，7：已取消\r\nconst clickOrder = (data) => {\r\n  toast()\r\n  active.value = data\r\n  orderGet(data == 8 ? '' : data)\r\n}\r\n\r\n// 删除订单\r\nconst delOrder = async (id) => {\r\n  Dialog.confirm({\r\n    title: '小xu提示',\r\n    message:\r\n      '您是否确认删除订单?',\r\n  })\r\n    .then(() => {\r\n      del(`/order/${id}`).then(res => {\r\n        Toast(res.msg)\r\n        orderGet()\r\n      })\r\n    }).catch(() => { });\r\n}\r\n// 去支付\r\nconst pustGoods = (id) => {\r\n  store.commit(\"changeRouterType\", \"push\")\r\n  router.push(`/paymentOrder?key=${id}`)\r\n}\r\n// 点击跳转商品详情页\r\nconst checkCard = (id) => {\r\n  store.commit(\"changeRouterType\", \"push\")\r\n  router.push(`/shoppage?key=${id}`)\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.body {\r\n  width: 100%;\r\n  min-height: 100%;\r\n  background-color: #f6f6f6;\r\n}\r\n.top {\r\n  width: 100%;\r\n  height: 0.46rem;\r\n}\r\n.main {\r\n  margin: 0 auto;\r\n  padding-bottom: 00.7rem;\r\n  min-height: calc(100vh - 0.96rem);\r\n  .label {\r\n    height: 100%;\r\n  }\r\n}\r\n.card {\r\n  margin-top: 00.16rem;\r\n  margin-left: 0.16rem;\r\n  margin-right: 0.16rem;\r\n  border-radius: 0.15rem;\r\n  background-color: #fff;\r\n  box-shadow: rgb(0 0 0 / 25%) 0rem 0.05rem 0.15rem;\r\n\r\n  .shop {\r\n    padding-top: 00.15rem;\r\n    span {\r\n      padding-left: 0.16rem;\r\n      font-size: 00.16rem;\r\n      font-weight: 600;\r\n    }\r\n  }\r\n  .goodsOrder {\r\n    .van-card {\r\n      background-color: #fff !important;\r\n    }\r\n  }\r\n  .choose {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding-bottom: 0.08rem;\r\n    span {\r\n      padding-left: 0.16rem;\r\n      line-height: 0.32rem;\r\n      font-size: 00.12rem;\r\n    }\r\n    button {\r\n      margin-right: 0.02rem;\r\n    }\r\n  }\r\n}\r\n</style>","import script from \"./Order.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Order.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=3b901cc3&lang=scss&scoped=true\"\n\nimport exportComponent from \"F:\\\\My-project\\\\shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3b901cc3\"]])\n\nexport default __exports__"],"names":["router","useRouter","store","useStore","active","ref","orderList","title","id","icon","span","async","orderGet","node","res","get","project_id","status","value","result","rows","toast","clickOrder","data","delOrder","Dialog","message","then","del","Toast","msg","catch","pustGoods","commit","push","checkCard","__exports__"],"sourceRoot":""}